<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

                <title>Software Development for Engineering Research - Parallel Computing</title>

                <meta name="description" content="
                Lecture on parallel computing for ME 599: Software Development for Engineering Research
                ">
		<meta name="author" content="Kyle Niemeyer">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/simple.css" id="theme">

		<!-- For syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- If the query includes 'print-pdf', include the PDF print sheet -->
		<script>
			if( window.location.search.match( /print-pdf/gi ) ) {
				var link = document.createElement( 'link' );
				link.rel = 'stylesheet';
				link.type = 'text/css';
				link.href = 'css/print/pdf.css';
				document.getElementsByTagName( 'head' )[0].appendChild( link );
			}
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
                <section>
                    <h2>Intro. to Parallel Computing</h2>
                    <h3>Software Development for Engineering Research</h3>
                    <br/>
                    <h3>Kyle Niemeyer. 2 May 2018</h3>
                    <h3>ME 599, Corvallis, OR</h3>
                </section>
                <section>
                    <section>
                        <h2>Today: Introduction to parallel computing (in Python)</h2>
                        <br/>
                        <p class="fragment">If you want more, check out <a href="http://web.engr.oregonstate.edu/~mjb/cs575/">CS 475/575 Parallel Programming</a>.
                        </p>
                    </section>

                    <section>
                        <h3>Approaching parallelism:</h3>
                        <br/>
                        <ul>
                            <li class="fragment">How do I do many things at once?
                            </li>
                            <li class="fragment">How do I do <em>one thing</em> faster?
                            </li>
                        </ul>
                        <br/>
                        <p class="fragment">Computer: perform many simultaneous tasks</p>
                        <p class="fragment">Developer: determine dependencies between code and data</p>
                    </section>

                    <section>
                        <p class="fragment">Up until now: serial thinking, like "x then y then z"</p>
                        <br/>
                        <p class="fragment">Benefit of parallelism: problems execute faster&mdash;sometimes <em>much</em> faster.</p>
                        <p class="fragment">Downside to parallelism: harder to program, debug, open files, print to screen.</p>
                    </section>

                    <section>
                        <h3>Why go parallel?</h3></br>
                        <p class="fragment">First: wait until your code works and you need it.</p>
                        <br/>
                        <ul>
                            <li class="fragment">The problem creates or requires too much data for a normal machine.
                            </li>
                            <li class="fragment">The sun would explode before the computation would finish.
                            </li>
                            <li class="fragment">The algorithm is easy to parallelize.
                            </li>
                            <li class="fragment">The physics itself cannot be simulated at all with smaller resources.
                            </li>
                        </ul>
                    </section>
                </section>

                <section>
                    <section>
                        <h3>Scale and Scalability</h3>
                        <br/>
                        <img class="fragment" src="./images/sense-and-sensibility.jpg" height="500" alt="Scale and Scalability 'book' image">
                    </section>

                    <section>
                        <h3>Scale and Scalability</h3>
                        <br/>
                        <p class="fragment">
                            <strong>Scale:</strong> size of problem
                        </p>
                        <p class="fragment">
                            Scale is proportional to number of processes <code>P</code> used,
                            and thus the maximum <em>degree of parallelism</em> possible.
                        </p>
                        <p class="fragment">
                            <strong>FLOPS:</strong> number of floating-point operations per second
                        </p>
                    </section>

                    <section>
                        <h3>Scaling up code</h3>
                        <br/>
                        <p class="fragment">
                            Scale up slowly&mdash;start with one processor, then 10, 100, etc.
                        </p>
                        <p class="fragment">
                            <strong>scalability:</strong> how easy or hard it is to scale code
                        </p>
                    </section>
                    <section>
                        <p>
                            <strong>strong scaling:</strong> how runtime changes as a function of processor number
                            for a fixed total problem size
                        </p>
                        <p class="fragment">
                            speedup \(s\): ratio of time on one processor, \(t_1\), to time on \(P\) processors, \(t_P\):
                        </p>
                        <div class="fragment">
                            <script type="math/tex; mode=display">
                                s(P) = \frac{t_1}{t_P}
                            </script>
                        </div>
                    </section>
                    <section>
                        <h3>Strong scaling</h3><br/>
                            <p class="fragment">
                                Efficient system: linear strong scaling speedup. For example, <a href="http://www.pyfr.org">PyFR</a> CFD code:

                            </p>
                            <img class="fragment" src="./images/pyfr-strongscaling.png" height="300" alt="pyFR strong scaling performance">
                            <div class="fragment">
                                <small>
                                    Ref: P Vincent et al. "PyFR: Next-Generation High-Order Computational Fluid Dynamics on Many-Core Hardware." 22nd AIAA CFD Conference. 2015.
                                </small>
                            </div>
                    </section>
                    <section>
                        <p class="fragment">
                            <strong>weak scaling:</strong> how runtime changes as a function of processor number
                            for a fixed problem size per processor
                        </p>
                        <p class="fragment">
                            sizeup \(z\), for a problem size \(N\):
                        </p>
                        <div class="fragment">
                            <script type="math/tex; mode=display">
                                z(P) = \frac{t_1}{t_P} \times \frac{N_P}{N_1}
                            </script>
                        </div>
                    </section>
                    <section>
                        <h3>Weak scaling</h3>
                        <p class="fragment">
                            Efficient system: linear sizeup. Or, constant time with additional processors/problem size.
                            For example, <a href="http://www.pyfr.org">PyFR</a> CFD code:
                        </p>
                        <img class="fragment" src="./images/pyfr-weakscaling.png" height="300" alt="pyFR weak scaling performance">
                        <div class="fragment">
                            <small>
                                Ref: P Vincent et al. "PyFR: Next-Generation High-Order Computational Fluid Dynamics on Many-Core Hardware." 22nd AIAA CFD Conference. 2015.
                            </small>
                        </div>
                    </section>

                    <section>
                        <h3>Amdahl's Law</h3>
                        <p class="fragment">
                            Some fraction of an algorithm, \(\alpha\), cannot be parallelized.
                            Then, the maximum speedup/sizeup for \(P\) processors is:
                        </p>
                        <div class="fragment">
                            <script type="math/tex; mode=display">
                                \max (s(P)) = \frac{1}{\alpha - \frac{1 - \alpha}{P}}
                            </script>
                        </div>

                        <p class="fragment">
                            Then, the theoretically max speedup is:
                        </p>
                        <div class="fragment">
                            <script type="math/tex; mode=display">
                                \max (s) = \frac{1}{\alpha}
                            </script>
                        </div>
                    </section>

                </section>

                <section>
                    <h3>Types of problems</h3>
                    <br/>
                    <div style="font-size:30px">
                        <p class="fragment">
                            <strong>embarassingly parallel:</strong> algorithms with a high degree
                            of independence and little communication between parts
                        </p>
                        <p class="fragment">
                            Examples: summing large arrays, matrix multiplication, Monte Carlo simulations,
                            some optimization approaches (e.g., stochastic and genetic algorithms)
                        </p>
                    </div>
                    <div style="font-size:30px">
                        <p class="fragment">
                            Other algorithms have unavoidable bottlenecks: inverting a matrix, ODE integration, etc.
                        </p>
                        <p class="fragment">
                            Not all hope is lost! Some parts may still benefit from parallelization.
                        </p>
                    </div>
                </section>

                <section>
                    <section>
                        <h3>Example: N-body problem</h3>
                        <br/>
                        <p class="fragment" style="font-size:30px">generalization of the classic 2-body problem
                            that governs the equations of motion for two masses. From Newton's law of gravity:
                        </p>
                        <div class="fragment">
                            <script type="math/tex; mode=display">
                                \frac{dp}{dt} = G \frac{m_1 m_2}{r^2}
                            </script>
                        </div>
                    </section>
                    <section>
                        <h3>Equations of motion:</h3>
                        <br/>
                        <div class="fragment">
                            <script type="math/tex; mode=display">
                                \begin{aligned}
                                \mathbf{x}_{i,s} & = G \sum_{j=1, i \neq j} \frac{m_j (\mathbf{x}_{j,s-1} - \mathbf{x}_{i,s-1})}{||\mathbf{x}_{j,s-1} - \mathbf{x}_{i,s-1}||^3} \Delta t^2 + \mathbf{v}_{i,s-1} \Delta t + \mathbf{x}_{i,s-1} \\
                                \mathbf{v}_{i,s} & = G \sum_{j=1, i \neq j} \frac{m_j (\mathbf{x}_{j,s-1} - \mathbf{x}_{i,s-1})}{||\mathbf{x}_{j,s-1} - \mathbf{x}_{i,s-1}||^3} \Delta t + \mathbf{v}_{i,s-1}
                                \end{aligned}
                            </script>
                        </div>
                    </section>
                </section>

			</div>

		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>

			// Full list of configuration options available here:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
				transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/fade/none

                math: {
                    mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
                    config: 'TeX-AMS_HTML-full'  // See http://docs.mathjax.org/en/latest/config-files.html
                },

				// Parallax scrolling
				// parallaxBackgroundImage: 'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg',
				// parallaxBackgroundSize: '2100px 900px',

				// Optional libraries used to extend on reveal.js
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
					{ src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } },
                    { src: 'plugin/math/math.js', async: true }
				]
			});

		</script>

	</body>
</html>
